<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FUSE Security Scanner - Cybersecurity Platform</title>
    <link rel="stylesheet" href="/styles.css?v=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <i class="fas fa-shield-halved"></i>
                <span>FUSE Security</span>
            </div>
            <div class="nav-links">
                <a href="#scanner" class="nav-link active" data-section="scanner-section">
                    <i class="fas fa-radar"></i> Scanner
                </a>
                <a href="#dashboard" class="nav-link" data-section="dashboard-section">
                    <i class="fas fa-chart-line"></i> Dashboard
                </a>
                <a href="#reports" class="nav-link" data-section="reports-section">
                    <i class="fas fa-file-alt"></i> Rapports
                </a>
            </div>
            <div class="nav-status">
                <div class="status-indicator">
                    <span class="status-dot"></span>
                    <span>Backend: <span id="backend-status">Checking...</span></span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-container">
            <div class="hero-content">
                <h1 class="hero-title">
                    <span class="gradient-text">Analysez la sécurité</span> de vos applications
                </h1>
                <p class="hero-subtitle">
                    Plateforme de pentesting automatisée avec IA. Scannez, analysez et sécurisez vos infrastructures en quelques clics.
                </p>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Scanner Section -->
            <section id="scanner-section" class="section">
                <div class="scan-card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <i class="fas fa-crosshairs"></i>
                            Nouveau Scan de Sécurité
                        </h2>
                        <p class="card-subtitle">Entrez l'URL de votre cible pour démarrer l'analyse de sécurité complète</p>
                    </div>

                    <div class="scan-form">
                        <div class="input-group">
                            <div class="input-icon">
                                <i class="fas fa-globe"></i>
                            </div>
                            <input 
                                type="text" 
                                id="target-url" 
                                class="form-input" 
                                placeholder="https://example.com"
                                autocomplete="off"
                            >
                            <button id="start-scan-btn" class="btn btn-primary">
                                <i class="fas fa-rocket"></i>
                                <span>Démarrer le Scan</span>
                            </button>
                        </div>
                        <div class="form-hint">
                            <i class="fas fa-info-circle"></i>
                            Le scan inclut : Footprinting, Port Scanning, Exploitation, Post-Exploitation et Reporting IA
                        </div>
                    </div>
                </div>

                <!-- Progress Section -->
                <div id="progress-section" class="progress-section" style="display: none;">
                    <div class="progress-card">
                        <div class="progress-header">
                            <h3>Scan en cours...</h3>
                            <span id="scan-id-display" class="scan-id"></span>
                        </div>

                        <!-- Steps Progress -->
                        <div class="steps-container">
                            <div class="step" data-step="0">
                                <div class="step-icon">
                                    <i class="fas fa-magnifying-glass"></i>
                                </div>
                                <div class="step-info">
                                    <div class="step-title">Footprinting</div>
                                    <div class="step-desc">Analyse des en-têtes HTTP</div>
                                </div>
                            </div>
                            <div class="step" data-step="1">
                                <div class="step-icon">
                                    <i class="fas fa-network-wired"></i>
                                </div>
                                <div class="step-info">
                                    <div class="step-title">Scanning</div>
                                    <div class="step-desc">Détection des ports ouverts</div>
                                </div>
                            </div>
                            <div class="step" data-step="2">
                                <div class="step-icon">
                                    <i class="fas fa-bug"></i>
                                </div>
                                <div class="step-info">
                                    <div class="step-title">Exploitation</div>
                                    <div class="step-desc">Test de vulnérabilités</div>
                                </div>
                            </div>
                            <div class="step" data-step="3">
                                <div class="step-icon">
                                    <i class="fas fa-user-secret"></i>
                                </div>
                                <div class="step-info">
                                    <div class="step-title">Post-Exploitation</div>
                                    <div class="step-desc">Analyse des vecteurs</div>
                                </div>
                            </div>
                            <div class="step" data-step="4">
                                <div class="step-icon">
                                    <i class="fas fa-lock"></i>
                                </div>
                                <div class="step-info">
                                    <div class="step-title">Persistence</div>
                                    <div class="step-desc">Vérification de sécurité</div>
                                </div>
                            </div>
                            <div class="step" data-step="5">
                                <div class="step-icon">
                                    <i class="fas fa-file-lines"></i>
                                </div>
                                <div class="step-info">
                                    <div class="step-title">Reporting</div>
                                    <div class="step-desc">Génération du rapport IA</div>
                                </div>
                            </div>
                        </div>

                        <!-- Progress Bar -->
                        <div class="progress-bar-container">
                            <div class="progress-bar">
                                <div id="progress-fill" class="progress-fill"></div>
                            </div>
                            <span id="progress-percent" class="progress-percent">0%</span>
                        </div>

                        <!-- Statistics -->
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                    <i class="fas fa-bug"></i>
                                </div>
                                <div class="stat-info">
                                    <div class="stat-value" id="vulns-count">0</div>
                                    <div class="stat-label">Vulnérabilités</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                                    <i class="fas fa-door-open"></i>
                                </div>
                                <div class="stat-info">
                                    <div class="stat-value" id="ports-count">0</div>
                                    <div class="stat-label">Ports Ouverts</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="stat-info">
                                    <div class="stat-value" id="duration">0s</div>
                                    <div class="stat-label">Durée</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                                    <i class="fas fa-list"></i>
                                </div>
                                <div class="stat-info">
                                    <div class="stat-value" id="logs-count">0</div>
                                    <div class="stat-label">Logs</div>
                                </div>
                            </div>
                        </div>

                        <!-- Live Logs -->
                        <div class="logs-section">
                            <div class="logs-header">
                                <h4><i class="fas fa-terminal"></i> Console en Direct</h4>
                                <button id="clear-logs-btn" class="btn-icon">
                                    <i class="fas fa-eraser"></i>
                                </button>
                            </div>
                            <div id="logs-container" class="logs-container"></div>
                        </div>
                    </div>
                </div>

                <!-- Results Section -->
                <div id="results-section" class="results-section" style="display: none;">
                    <div class="results-card">
                        <div class="results-header">
                            <h3>
                                <i class="fas fa-chart-pie"></i>
                                Résultats du Scan
                            </h3>
                            <button id="download-report-btn" class="btn btn-secondary">
                                <i class="fas fa-download"></i>
                                Télécharger le Rapport
                            </button>
                        </div>

                        <!-- Summary Cards -->
                        <div class="summary-grid">
                            <div class="summary-card">
                                <div class="summary-icon critical">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </div>
                                <div class="summary-content">
                                    <h4>Statut de Sécurité</h4>
                                    <p id="security-status">Analyse...</p>
                                </div>
                            </div>
                            <div class="summary-card">
                                <div class="summary-icon info">
                                    <i class="fas fa-server"></i>
                                </div>
                                <div class="summary-content">
                                    <h4>Serveur Détecté</h4>
                                    <p id="server-info">Inconnu</p>
                                </div>
                            </div>
                        </div>

                        <!-- Open Ports -->
                        <div class="results-box">
                            <h4><i class="fas fa-door-open"></i> Ports Ouverts</h4>
                            <div id="ports-list" class="ports-list"></div>
                        </div>

                        <!-- Security Headers -->
                        <div class="results-box">
                            <h4><i class="fas fa-shield-alt"></i> En-têtes de Sécurité</h4>
                            <div id="headers-list" class="headers-list"></div>
                        </div>

                        <!-- AI Report -->
                        <div class="results-box ai-report-box">
                            <h4><i class="fas fa-robot"></i> Rapport Généré par IA (Gemini)</h4>
                            <div id="ai-report" class="ai-report"></div>
                        </div>

                        <div class="results-actions">
                            <button id="new-scan-btn" class="btn btn-primary">
                                <i class="fas fa-plus"></i>
                                Nouveau Scan
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Dashboard Section -->
            <section id="dashboard-section" class="section" style="display: none;">
                <div class="dashboard-card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <i class="fas fa-chart-line"></i>
                            Tableau de Bord
                        </h2>
                        <p class="card-subtitle">Vue d'ensemble des scans de sécurité</p>
                    </div>

                    <!-- Dashboard Stats -->
                    <div class="dashboard-grid">
                        <div class="dashboard-stat">
                            <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="total-scans">0</div>
                                <div class="stat-label">Scans Totaux</div>
                            </div>
                        </div>
                        <div class="dashboard-stat">
                            <div class="stat-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="secure-targets">0</div>
                                <div class="stat-label">Cibles Sécurisées</div>
                            </div>
                        </div>
                        <div class="dashboard-stat">
                            <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="at-risk-targets">0</div>
                                <div class="stat-label">Cibles à Risque</div>
                            </div>
                        </div>
                        <div class="dashboard-stat">
                            <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                                <i class="fas fa-bug"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="total-vulns">0</div>
                                <div class="stat-label">Vulnérabilités Totales</div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Scans Table -->
                    <div class="recent-scans-box">
                        <h3><i class="fas fa-history"></i> Scans Récents</h3>
                        <div id="recent-scans-table" class="scans-table"></div>
                    </div>
                </div>
            </section>

            <!-- Reports Section -->
            <section id="reports-section" class="section" style="display: none;">
                <div class="reports-card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <i class="fas fa-file-alt"></i>
                            Rapports de Sécurité
                        </h2>
                        <p class="card-subtitle">Historique complet des rapports générés</p>
                    </div>

                    <!-- Reports Filters -->
                    <div class="reports-filters">
                        <div class="filter-group">
                            <input type="text" id="report-search" class="filter-input" placeholder="Rechercher un rapport...">
                        </div>
                        <div class="filter-group">
                            <select id="report-sort" class="filter-select">
                                <option value="recent">Plus récent d'abord</option>
                                <option value="oldest">Plus ancien d'abord</option>
                                <option value="target">Par cible (A-Z)</option>
                                <option value="vulns">Par vulnérabilités (DESC)</option>
                            </select>
                        </div>
                    </div>

                    <!-- Reports List -->
                    <div id="reports-list" class="reports-list"></div>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <i class="fas fa-shield-halved"></i>
                    <span>FUSE Security Scanner</span>
                </div>
                <div class="footer-text">
                    Plateforme de pentesting automatisée avec IA | Sécurisez vos applications
                </div>
            </div>
        </div>
    </footer>

    <script src="/app.js?v=1"></script>

    <!-- Report Modal -->
    <div id="report-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-report-title">Rapport Complet</h2>
                <button id="modal-close-btn" class="modal-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div id="modal-report-content" class="ai-report"></div>
            </div>
            <div class="modal-footer">
                <button id="modal-download-btn" class="btn btn-secondary">
                    <i class="fas fa-download"></i>
                    Télécharger
                </button>
                <button id="modal-close-btn2" class="btn btn-primary">
                    <i class="fas fa-check"></i>
                    Fermer
                </button>
            </div>
        </div>
    </div>

    <div id="modal-overlay" class="modal-overlay" style="display: none;"></div>
</body>
</html>
